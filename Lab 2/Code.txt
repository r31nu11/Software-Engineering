org 100h ; начало программы

segment data ; сегмент данных
    array db 1, 0, 5, 0, 0, 2, 0, 4, 0, 3 ; массив из 10 элементов
    msg db "в массиве %d элемента, не равных 0", 13, 10, "$" ; шаблон сообщения
    count db ? ; счетчик ненулевых элементов

segment code ; сегмент кода
    mov si, array ; загрузить адрес массива в si
    mov cx, 10 ; загрузить размер массива в cx
    xor al, al ; обнулить al
    mov count, al ; обнулить счетчик

loop1: ; цикл по элементам массива
    lodsb ; загрузить очередной элемент в al
    test al, al ; проверить на равенство нулю
    jz skip ; если равен нулю, пропустить увеличение счетчика
    inc count ; иначе увеличить счетчик на 1
skip: ; метка для пропуска увеличения счетчика
    loop loop1 ; повторить цикл пока cx не равен нулю

    mov ah, 9 ; выбрать функцию вывода строки на экран
    mov dx, msg ; загрузить адрес сообщения в dx
    int 21h ; вызвать прерывание DOS

    mov ah, 2 ; выбрать функцию вывода символа на экран
    mov dl, count ; загрузить счетчик в dl
    add dl, '0' ; преобразовать число в символ
    int 21h ; вызвать прерывание DOS

    mov ah, 9 ; выбрать функцию вывода строки на экран
    mov dx, msg + 18 ; загрузить адрес конца сообщения в dx
    int 21h ; вызвать прерывание DOS

    mov ah, 4ch ; выбрать функцию завершения программы
    int 21h ; вызвать прерывание DOS