; создаем COM программу для DOS
org 100h

; читаем строку с клавиатуры
mov ah, 0Ah
mov dx, buffer
int 21h

; проверяем длину строки
mov al, [buffer+1] ; al = длина строки
cmp al, 5 ; если меньше 5 символов
jb error ; то ошибка
cmp al, 8 ; если больше 8 символов
ja error ; то ошибка

; проверяем второй и третий символы
mov bl, [buffer+3] ; bl = второй символ
cmp bl, [buffer+4] ; если не равен третьему символу
jne error ; то ошибка

; проверяем первый символ
mov cl, [buffer+2] ; cl = первый символ
cmp cl, 'A' ; если меньше 'A'
jb error ; то ошибка
cmp cl, 'Z' ; если больше 'Z'
ja check_lower ; то проверяем строчные буквы
jmp ok ; иначе все хорошо

check_lower:
cmp cl, 'a' ; если меньше 'a'
jb error ; то ошибка
cmp cl, 'z' ; если больше 'z'
ja error ; то ошибка

ok:
; проверяем предпредпоследний символ
push ax ; сохраняем значение al в стеке
mov si, [buffer+2] ; si = первый символ строки
cbw ; расширяем al до ax (добавляем нули в ah)
add si, ax ; прибавляем к si значение ax (длину строки)
dec si ; уменьшаем на единицу (предпредпоследний символ)
mov si, [buffer+si] ; si = предпредпоследний символ строки
pop ax ; восстанавливаем значение al из стека
cmp si, '0' ; если меньше '0'
jb error ; то ошибка
cmp si, '9' ; если больше '9'
ja error ; то ошибка

; выводим сообщение об успехе
mov ah, 09h
mov dx, success_msg
int 21h

; завершаем программу
mov ah, 4Ch
int 21h

error:
; выводим сообщение об ошибке
mov ah, 09h
mov dx, error_msg
int 21h

; завершаем программу с кодом ошибки 1
mov ah, 4Ch
mov al, 1
int 21h

; объявляем буфер для ввода строки (максимум 10 символов)
buffer db 10, ?, 10 dup(0)
; объявляем сообщения для вывода на экран
success_msg db "Строка соответствует условиям.$"
error_msg db "Строка не соответствует условиям.$"